[TOC]



## åŸºæœ¬è¯­æ³•

```
DataFrame.to_json(
    path_or_buf=None, 
    orient=None, 
    date_format='epoch', 
    double_precision=10, 
    force_ascii=True, 
    date_unit='ms', 
    lines=False, 
    compression='infer',
    index=True, 
    indent=None,
    storage_options=None
)
```

------

## å¸¸ç”¨å‚æ•°è®²è§£

| å‚æ•°          | ä½œç”¨                                  | ç¤ºä¾‹                                                       |
| ------------- | ------------------------------------- | ---------------------------------------------------------- |
| `path_or_buf` | è·¯å¾„ or Noneï¼ˆè¿”å›å­—ç¬¦ä¸²ï¼‰            | `to_json("out.json")`                                      |
| `orient`      | è¾“å‡ºç»“æ„ç±»å‹ï¼ˆéå¸¸é‡è¦ï¼‰              | `'records'`, `'split'`, `'index'`, `'columns'`, `'values'` |
| `lines`       | æ˜¯å¦æŒ‰è¡Œå†™ JSONï¼ˆç”¨äºå¤§æ•°æ®æµå¼å¤„ç†ï¼‰ | `lines=True`                                               |
| `indent`      | è®¾ç½®ç¼©è¿›ï¼Œç”Ÿæˆ**æ¼‚äº®çš„ JSON**         | `indent=2`                                                 |
| `index`       | æ˜¯å¦ä¿å­˜ç´¢å¼•                          | `index=False`ï¼ˆä¸ä¿ç•™ indexï¼‰                              |

------

## orient å‚æ•°è¯¦è§£ï¼ˆé‡ä¸­ä¹‹é‡ï¼‰

| orient      | è¾“å‡ºç»“æ„                            | ç‰¹ç‚¹                    |
| ----------- | ----------------------------------- | ----------------------- |
| `"records"` | æ¯ä¸€è¡Œæ˜¯ä¸€ä¸ª JSON å¯¹è±¡              | æœ€å¸¸ç”¨äº REST APIã€å‰ç«¯ |
| `"split"`   | å­—å…¸ç»“æ„ï¼šåŒ…å« indexã€columnsã€data | æ˜“è¯»                    |
| `"index"`   | ç´¢å¼•ä¸ºé”®ï¼Œæ¯è¡Œæ˜¯å€¼çš„å­—å…¸            | ç±»ä¼¼è¡Œç´¢å¼•ä¸ºä¸»          |
| `"columns"` | åˆ—åä¸ºé”®ï¼Œæ¯åˆ—æ˜¯å€¼çš„åˆ—è¡¨            | ç±»ä¼¼åˆ—ç´¢å¼•ä¸ºä¸»          |
| `"values"`  | ä»…æ•°æ®å€¼ï¼ˆåµŒå¥—åˆ—è¡¨ï¼‰                | æœ€è½»é‡                  |

------

### ç¤ºä¾‹ DataFrame

```
import pandas as pd

df = pd.DataFrame({
    "name": ["Tom", "Jerry"],
    "score": [95, 85]
}, index=["s1", "s2"])
```

------

### 1ã€orient="records"

```
df.to_json(orient="records")
```

è¾“å‡ºï¼ˆJSON å­—ç¬¦ä¸²ï¼‰ï¼š

```
[
  {"name":"Tom","score":95},
  {"name":"Jerry","score":85}
]
```

ğŸ”¥ æœ€å¸¸è§æ ¼å¼ï¼Œé€‚åˆå‰ç«¯/APIä¼ è¾“

------

### 2ã€orient="split"

```
df.to_json(orient="split", indent=2)
```

è¾“å‡ºï¼š

```
{
  "index": ["s1", "s2"],
  "columns": ["name", "score"],
  "data": [["Tom", 95], ["Jerry", 85]]
}
```

ç»“æ„æ¸…æ™°ï¼Œæ–¹ä¾¿ç¨‹åºæ¢å¤ DataFrame

------

### 3ã€orient="index"

```
df.to_json(orient="index", indent=2)
```

è¾“å‡ºï¼š

```
{
  "s1": {"name": "Tom", "score": 95},
  "s2": {"name": "Jerry", "score": 85}
}
```

é€‚åˆä»¥ index ä¸ºä¸»é”®çš„æ•°æ®ç»“æ„ï¼Œå¦‚æ•°æ®åº“å¯¼å…¥ç­‰ã€‚

------

### 4ã€orient="columns"

```
df.to_json(orient="columns", indent=2)
```

è¾“å‡ºï¼š

```
{
  "name": {"s1": "Tom", "s2": "Jerry"},
  "score": {"s1": 95, "s2": 85}
}
```

ä»¥åˆ—ä¸ºä¸»é”® â†’ é€‚åˆåˆ—æ–¹å‘çš„å¤„ç†

------

### 5ã€orient="values"

```
df.to_json(orient="values")
```

è¾“å‡ºï¼š

```
[["Tom", 95], ["Jerry", 85]]
```

æœ€è½»é‡ç»“æ„ï¼Œä½†æ²¡å­—æ®µåï¼Œé€‚åˆåµŒå¥—ç”¨é€”

------

## å†™å…¥æ–‡ä»¶ vs è¿”å›å­—ç¬¦ä¸²

### è½¬å­—ç¬¦ä¸²ï¼ˆå¸¸ç”¨ï¼‰

```
json_str = df.to_json(orient="records", indent=2)
```

### å†™å…¥ JSON æ–‡ä»¶

```
df.to_json("out.json", orient="records", indent=2)
```

æ–‡ä»¶ä¿å­˜åå¯ä»¥è¢« JavaScriptã€å‰ç«¯ã€æ¥å£ç›´æ¥è¯»å–ã€‚

------

## å®æˆ˜å°æŠ€å·§

| ç›®æ ‡                   | å†™æ³•                |
| ---------------------- | ------------------- |
| è¾“å‡ºæ ¼å¼åŒ– JSON        | `indent=2`          |
| ä¸­æ–‡ä¸è½¬ç              | `force_ascii=False` |
| ä¸ä¿å­˜ç´¢å¼•             | `index=False`       |
| ä¸€è¡Œä¸€æ¡ JSONï¼ˆæµå¼ï¼‰  | `lines=True`        |
| ä¿å­˜ä¸ºå­—ç¬¦ä¸²ä¾›æ¥å£ä¼ è¾“ | ä¸å¡« `path_or_buf`  |

------

## å¸¸è§é”™è¯¯å’Œæ³¨æ„äº‹é¡¹

| é—®é¢˜                                                       | åŸå›                                            |
| ---------------------------------------------------------- | ---------------------------------------------- |
| æŠ¥é”™ï¼š`ValueError: can only be used with orient='records'` | ä½¿ç”¨äº† `lines=True` ä½† orient ä¸ä¸º `'records'` |
| ä¸­æ–‡å˜æˆ `\u4e2d\u6587`                                    | é»˜è®¤ `force_ascii=True`ï¼Œæ”¹æˆ False å³å¯       |

------

## å¯¹æ¯” CSV / Excel

| æ ¼å¼          | ç”¨æ³•       | ç»“æ„     | ä¼˜åŠ¿                    |
| ------------- | ---------- | -------- | ----------------------- |
| `.to_csv()`   | è¡¨æ ¼åŒ–æ•°æ® | æ–‡æœ¬è¡¨æ ¼ | é€šç”¨ã€æ˜“å¯¼å…¥            |
| `.to_excel()` | è¡¨æ ¼åŒ–æ•°æ® | è¡¨æ ¼     | Office åœºæ™¯             |
| `.to_json()`  | ç»“æ„åŒ–æ•°æ® | æ ‘å½¢ç»“æ„ | æœ€é€‚åˆæ¥å£ / å‰ç«¯ä¼ è¾“ âœ… |

------

## æ€»ç»“é€ŸæŸ¥è¡¨

| åŠŸèƒ½                  | å†™æ³•                            |
| --------------------- | ------------------------------- |
| è½¬ JSON å­—ç¬¦ä¸²        | `df.to_json()`                  |
| ä¿å­˜ JSON æ–‡ä»¶        | `df.to_json("a.json")`          |
| è½¬ä¸º records æ ¼å¼     | `orient="records"`              |
| ä¸­æ–‡ä¸è½¬ä¹‰            | `force_ascii=False`             |
| æ ¼å¼åŒ–ç¼©è¿›            | `indent=2`                      |
| æ¯è¡Œä¸€ä¸ª JSONï¼ˆæµå¼ï¼‰ | `lines=True`ï¼ˆä»… records æ”¯æŒï¼‰ |